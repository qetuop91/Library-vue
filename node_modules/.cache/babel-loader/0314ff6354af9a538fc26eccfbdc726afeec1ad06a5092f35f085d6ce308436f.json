{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Layout from \"@/views/Layout\";\nimport Cookies from \"js-cookie\";\nimport createWebHashHistory from 'vue-router';\nVue.use(VueRouter);\nconst routes = [\n// Login\n{\n  path: '/login',\n  name: 'Login',\n  component: () => import('@/views/login/Login.vue')\n},\n// 主页\n{\n  path: '/',\n  name: 'Layout',\n  component: Layout,\n  redirect: '/home',\n  // 重定向\n  children: [\n  // 子路由\n  {\n    path: 'home',\n    name: 'Home',\n    component: () => import('@/views/home/HomeView.vue')\n  },\n  // User\n  {\n    path: 'userList',\n    name: 'UserList',\n    component: () => import('@/views/user/UserList.vue')\n  }, {\n    path: 'addUser',\n    name: 'AddUser',\n    component: () => import('@/views/user/AddUser.vue')\n  }, {\n    path: 'editUser',\n    name: 'EditUser',\n    component: () => import('@/views/user/EditUser.vue')\n  },\n  // Admin\n  {\n    path: 'adminList',\n    name: 'AdminList',\n    component: () => import('@/views/admin/AdminList.vue')\n  }, {\n    path: 'addAdmin',\n    name: 'AddAdmin',\n    component: () => import('@/views/admin/AddAdmin.vue')\n  }, {\n    path: 'editAdmin',\n    name: 'EditAdmin',\n    component: () => import('@/views/admin/EditAdmin.vue')\n  },\n  // Category\n  {\n    path: 'categoryList',\n    name: 'CategoryList',\n    component: () => import('@/views/category/CategoryList.vue')\n  }, {\n    path: 'addCategory',\n    name: 'AddCategory',\n    component: () => import('@/views/category/AddCategory.vue')\n  }, {\n    path: 'editCategory',\n    name: 'EditCategory',\n    component: () => import('@/views/category/EditCategory.vue')\n  },\n  // Book\n  {\n    path: 'bookList',\n    name: 'BookList',\n    component: () => import('@/views/book/BookList.vue')\n  }, {\n    path: 'addBook',\n    name: 'AddBook',\n    component: () => import('@/views/book/AddBook.vue')\n  }, {\n    path: 'editBook',\n    name: 'EditBook',\n    component: () => import('@/views/book/EditBook.vue')\n  },\n  // Borrow\n  {\n    path: 'borrowList',\n    name: 'BorrowList',\n    component: () => import('@/views/borrow/BorrowList.vue')\n  }, {\n    path: 'addBorrow',\n    name: 'AddBorrow',\n    component: () => import('@/views/borrow/AddBorrow.vue')\n  }, {\n    path: 'editBorrow',\n    name: 'EditBorrow',\n    component: () => import('@/views/borrow/EditBorrow.vue')\n  }]\n}, {\n  path: \"*\",\n  component: () => import('@/views/404.vue')\n}];\nconst router = new VueRouter({\n  // mode: 'history',\n  base: process.env.BASE_URL,\n  //配置后刷新路由不会出现页面404的问题\n  history: createWebHashHistory,\n  routes\n});\n\n// 守护路由\nrouter.beforeEach((to, from, next) => {\n  const admin_token = Cookies.get('Admin-Token');\n  // 如果访问路径是登录页面则直接放行\n  if (to.path === '/login') {\n    next();\n  }\n  // 如果不是就获取Cookie中的Admin-Token\n  // 如果token不存在且访问的路径也不是登录页\n  if (!admin_token && to.path !== '/login') {\n    // 跳转到登录页\n    return next('/login');\n  }\n\n  // token存在且访问路径不为登录页就直接放行\n  next();\n});\nexport default router;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}