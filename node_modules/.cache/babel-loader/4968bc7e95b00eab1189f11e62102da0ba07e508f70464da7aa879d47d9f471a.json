{"ast":null,"code":"import Cookies from \"js-cookie\";\nimport { checkAdmin } from \"@/utils/check\";\nimport * as echarts from 'echarts';\nimport request from \"@/utils/request\";\nconst option = {\n  title: {\n    text: '图书借还统计'\n  },\n  tooltip: {\n    trigger: 'axis'\n  },\n  legend: {\n    data: ['借书数量', '还书数量']\n  },\n  grid: {\n    left: '3%',\n    right: '4%',\n    bottom: '3%',\n    containLabel: true\n  },\n  toolbox: {\n    feature: {\n      saveAsImage: {}\n    }\n  },\n  xAxis: {\n    type: 'category',\n    boundaryGap: false,\n    data: []\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [{\n    name: '借书数量',\n    type: 'line',\n    stack: 'Total',\n    smooth: true,\n    data: []\n  }, {\n    name: '还书数量',\n    type: 'line',\n    stack: 'Total',\n    smooth: true,\n    data: []\n  }]\n};\nexport default {\n  data() {\n    return {\n      admin: Cookies.get('admin') ? JSON.parse(Cookies.get('admin')) : {},\n      lineBox: null,\n      timeRange: 'week',\n      options: [{\n        label: '最近一周',\n        value: 'week'\n      }, {\n        label: '最近一个月',\n        value: 'month'\n      }, {\n        label: '最近两个月',\n        value: 'month2'\n      }, {\n        label: '最近三个月',\n        value: 'month3'\n      }]\n    };\n  },\n  mounted() {\n    this.load();\n  },\n  created() {\n    checkAdmin();\n  },\n  methods: {\n    load() {\n      if (!this.lineBox) {\n        this.lineBox = echarts.init(document.getElementById('line'));\n      }\n      request.get('/borrow/lineCharts/' + this.timeRange).then(res => {\n        console.log(res);\n        //设置x轴月份\n        option.xAxis.data = res.data.date;\n        //设置借书数量\n        option.series[0].data = res.data.borrowCount;\n        //设置还书数量\n        option.series[1].data = res.data.returnCount;\n        //重新设置容器的属性值，当数据发生变化的时候一定要重新setOption\n        this.lineBox.setOption(option);\n      });\n    }\n  }\n};","map":{"version":3,"names":["Cookies","checkAdmin","echarts","request","option","title","text","tooltip","trigger","legend","data","grid","left","right","bottom","containLabel","toolbox","feature","saveAsImage","xAxis","type","boundaryGap","yAxis","series","name","stack","smooth","admin","get","JSON","parse","lineBox","timeRange","options","label","value","mounted","load","created","methods","init","document","getElementById","then","res","console","log","date","borrowCount","returnCount","setOption"],"sources":["src/views/home/HomeView.vue"],"sourcesContent":["<template>\n  <div>\n    <div style=\"margin: 20px 0\">\n      <el-select class=\"input\" v-model=\"timeRange\" placeholder=\"请选择\" @change=\"load\">\n        <el-option\n          v-for=\"item in options\"\n          :key=\"item.value\"\n          :label=\"item.label\"\n          :value=\"item.value\"\n        ></el-option>\n      </el-select>\n    </div>\n    <el-card style=\"width: 100%;>\n      <div id=\"line\" style=\"width: 100%; height: 400px\"></div>\n    </el-card>\n  </div>\n\n</template>\n\n<script>\nimport Cookies from \"js-cookie\";\nimport {checkAdmin} from \"@/utils/check\";\nimport * as echarts from 'echarts';\nimport request from \"@/utils/request\";\n\n\nconst option = {\n  title: {\n    text: '图书借还统计'\n  },\n  tooltip: {\n    trigger: 'axis'\n  },\n  legend: {\n    data: ['借书数量', '还书数量']\n  },\n  grid: {\n    left: '3%',\n    right: '4%',\n    bottom: '3%',\n    containLabel: true\n  },\n  toolbox: {\n    feature: {\n      saveAsImage: {}\n    }\n  },\n  xAxis: {\n    type: 'category',\n    boundaryGap: false,\n    data: []\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [\n    {\n      name: '借书数量',\n      type: 'line',\n      stack: 'Total',\n      smooth: true,\n      data: []\n    },\n    {\n      name: '还书数量',\n      type: 'line',\n      stack: 'Total',\n      smooth: true,\n      data: []\n    }\n  ]\n};\n\nexport default {\n  data() {\n    return {\n      admin: Cookies.get('admin') ? JSON.parse(Cookies.get('admin')) : {},\n      lineBox: null,\n      timeRange: 'week',\n      options: [\n        {label: '最近一周', value: 'week'},\n        {label: '最近一个月', value: 'month'},\n        {label: '最近两个月', value: 'month2'},\n        {label: '最近三个月', value: 'month3'},\n      ]\n    }\n  },\n  mounted() {\n    this.load()\n  },\n  created() {\n    checkAdmin()\n  },\n  methods: {\n    load() {\n      if (!this.lineBox) {\n        this.lineBox = echarts.init(document.getElementById('line'))\n      }\n      request.get('/borrow/lineCharts/' + this.timeRange).then(res => {\n        console.log(res)\n        //设置x轴月份\n        option.xAxis.data = res.data.date\n        //设置借书数量\n        option.series[0].data = res.data.borrowCount\n        //设置还书数量\n        option.series[1].data = res.data.returnCount\n        //重新设置容器的属性值，当数据发生变化的时候一定要重新setOption\n        this.lineBox.setOption(option)\n      })\n    }\n  }\n}\n</script>\n\n<style>\n.item {\n  margin: 10px 0;\n  color: #666;\n}\n</style>\n"],"mappings":"AAoBA,OAAAA,OAAA;AACA,SAAAC,UAAA;AACA,YAAAC,OAAA;AACA,OAAAC,OAAA;AAGA,MAAAC,MAAA;EACAC,KAAA;IACAC,IAAA;EACA;EACAC,OAAA;IACAC,OAAA;EACA;EACAC,MAAA;IACAC,IAAA;EACA;EACAC,IAAA;IACAC,IAAA;IACAC,KAAA;IACAC,MAAA;IACAC,YAAA;EACA;EACAC,OAAA;IACAC,OAAA;MACAC,WAAA;IACA;EACA;EACAC,KAAA;IACAC,IAAA;IACAC,WAAA;IACAX,IAAA;EACA;EACAY,KAAA;IACAF,IAAA;EACA;EACAG,MAAA,GACA;IACAC,IAAA;IACAJ,IAAA;IACAK,KAAA;IACAC,MAAA;IACAhB,IAAA;EACA,GACA;IACAc,IAAA;IACAJ,IAAA;IACAK,KAAA;IACAC,MAAA;IACAhB,IAAA;EACA;AAEA;AAEA;EACAA,KAAA;IACA;MACAiB,KAAA,EAAA3B,OAAA,CAAA4B,GAAA,YAAAC,IAAA,CAAAC,KAAA,CAAA9B,OAAA,CAAA4B,GAAA;MACAG,OAAA;MACAC,SAAA;MACAC,OAAA,GACA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA;IAEA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,QAAA;IACArC,UAAA;EACA;EACAsC,OAAA;IACAF,KAAA;MACA,UAAAN,OAAA;QACA,KAAAA,OAAA,GAAA7B,OAAA,CAAAsC,IAAA,CAAAC,QAAA,CAAAC,cAAA;MACA;MACAvC,OAAA,CAAAyB,GAAA,8BAAAI,SAAA,EAAAW,IAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;QACA;QACAxC,MAAA,CAAAe,KAAA,CAAAT,IAAA,GAAAkC,GAAA,CAAAlC,IAAA,CAAAqC,IAAA;QACA;QACA3C,MAAA,CAAAmB,MAAA,IAAAb,IAAA,GAAAkC,GAAA,CAAAlC,IAAA,CAAAsC,WAAA;QACA;QACA5C,MAAA,CAAAmB,MAAA,IAAAb,IAAA,GAAAkC,GAAA,CAAAlC,IAAA,CAAAuC,WAAA;QACA;QACA,KAAAlB,OAAA,CAAAmB,SAAA,CAAA9C,MAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}