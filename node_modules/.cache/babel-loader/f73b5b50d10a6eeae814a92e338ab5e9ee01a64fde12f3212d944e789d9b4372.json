{"ast":null,"code":"import request from \"@/utils/request\";\nimport { getToken } from \"@/utils/auth\";\nexport default {\n  name: 'UserList',\n  data() {\n    const checkNums = (rule, value, callback) => {\n      value = parseInt(value);\n      if (value < 10 || value > 1000) {\n        callback(new Error('请输入大于等于10或小于等于1000的整数'));\n      }\n      callback();\n    };\n    return {\n      tableData: [],\n      total: 0,\n      params: {\n        pageNum: 1,\n        pageSize: 10,\n        name: '',\n        phone: ''\n      },\n      dialogFormVisible: false,\n      form: {},\n      rules: {\n        score: [{\n          require: true,\n          message: '请输入积分',\n          trigger: 'blur'\n        }, {\n          validator: checkNums,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get('/user/page', {\n        params: this.params\n      }).then(res => {\n        if (res.code === 200) {\n          this.total = Number(res.data.total);\n          this.tableData = res.data.records;\n        }\n      });\n    },\n    reset() {\n      this.params = {\n        pageNum: 1,\n        pageSize: 10,\n        name: '',\n        phone: ''\n      };\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      // 点击触发分页按钮\n      console.log(pageNum);\n      this.params.pageNum = pageNum;\n      this.load();\n    },\n    del(id) {\n      request.delete('/user/delete/' + id).then(res => {\n        console.log(res);\n        if (res.code === 200) {\n          this.$notify.success('删除成功');\n          this.load();\n        } else {\n          this.$notify.error(res.msg);\n        }\n      });\n    },\n    handleAccountAdd(row) {\n      this.form = JSON.parse(JSON.stringify(row));\n      this.dialogFormVisible = true;\n    },\n    addAccount() {\n      this.$refs['ruleForm'].validate(valid => {\n        if (valid) {\n          request.post('/user/account', this.form).then(res => {\n            if (res.code === 200) {\n              console.log(res);\n              this.$notify.success('充值成功');\n              this.dialogFormVisible = false;\n              this.load();\n            } else {\n              this.$notify.error(res.msg);\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}