{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Layout from \"@/views/Layout\";\nimport Cookies from \"js-cookie\";\nVue.use(VueRouter);\nconst routes = [\n// Login\n{\n  path: '/login',\n  name: 'Login',\n  component: () => import('@/views/login/Login.vue')\n},\n// 主页\n{\n  path: '/',\n  name: 'Layout',\n  component: Layout,\n  redirect: '/home',\n  // 重定向\n  children: [\n  // 子路由\n  {\n    path: 'home',\n    name: 'Home',\n    component: () => import('@/views/home/HomeView.vue')\n  },\n  // User\n  {\n    path: 'userList',\n    name: 'UserList',\n    component: () => import('@/views/user/UserList.vue')\n  }, {\n    path: 'addUser',\n    name: 'AddUser',\n    component: () => import('@/views/user/AddUser.vue')\n  }, {\n    path: 'editUser',\n    name: 'EditUser',\n    component: () => import('@/views/user/EditUser.vue')\n  },\n  // Admin\n  {\n    path: 'adminList',\n    name: 'AdminList',\n    component: () => import('@/views/admin/AdminList.vue')\n  }, {\n    path: 'addAdmin',\n    name: 'AddAdmin',\n    component: () => import('@/views/admin/AddAdmin.vue')\n  }, {\n    path: 'editAdmin',\n    name: 'EditAdmin',\n    component: () => import('@/views/admin/EditAdmin.vue')\n  },\n  // Category\n  {\n    path: 'categoryList',\n    name: 'CategoryList',\n    component: () => import('@/views/category/CategoryList.vue')\n  }, {\n    path: 'addCategory',\n    name: 'AddCategory',\n    component: () => import('@/views/category/AddCategory.vue')\n  }, {\n    path: 'editCategory',\n    name: 'EditCategory',\n    component: () => import('@/views/category/EditCategory.vue')\n  },\n  // Book\n  {\n    path: 'bookList',\n    name: 'BookList',\n    component: () => import('@/views/book/BookList.vue')\n  }, {\n    path: 'addBook',\n    name: 'AddBook',\n    component: () => import('@/views/book/AddBook.vue')\n  }, {\n    path: 'editBook',\n    name: 'EditBook',\n    component: () => import('@/views/book/EditBook.vue')\n  },\n  // Borrow\n  {\n    path: 'borrowList',\n    name: 'BorrowList',\n    component: () => import('@/views/borrow/BorrowList.vue')\n  }, {\n    path: 'addBorrow',\n    name: 'AddBorrow',\n    component: () => import('@/views/borrow/AddBorrow.vue')\n  }, {\n    path: 'editBorrow',\n    name: 'EditBorrow',\n    component: () => import('@/views/borrow/EditBorrow.vue')\n  }]\n}, {\n  path: \"*\",\n  component: () => import('@/views/404.vue')\n}];\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\n\n// 守护路由\nrouter.beforeEach((to, from, next) => {\n  const savedRoute = localStorage.getItem('savedRoute');\n  // 如果访问路径是登录页面则直接放行\n  if (to.path === '/login') {\n    next();\n  }\n  // 如果不是就获取Cookie中的Admin-Token\n  const admin_token = Cookies.get('Admin-Token');\n  // 如果token不存在且访问的路径也不是登录页\n  if (!admin_token && to.path !== '/login') {\n    // 跳转到登录页\n    return next('/login');\n  }\n  if (savedRoute) {\n    next(savedRoute);\n  }\n\n  // token存在且访问路径不为登录页就直接放行\n  next();\n});\nrouter.afterEach(to => {\n  localStorage.setItem('savedRoute', to.fullPath);\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","Layout","Cookies","use","routes","path","name","component","redirect","children","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","savedRoute","localStorage","getItem","admin_token","get","afterEach","setItem","fullPath"],"sources":["F:/Vue/library-management/vue/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Layout from \"@/views/Layout\";\nimport Cookies from \"js-cookie\";\n\nVue.use(VueRouter)\n\nconst routes = [\n    // Login\n    {\n        path: '/login', name: 'Login', component: () => import('@/views/login/Login.vue')\n    },\n    // 主页\n    {\n        path: '/', name: 'Layout', component: Layout, redirect: '/home', // 重定向\n        children: [ // 子路由\n            {\n                path: 'home', name: 'Home', component: () => import('@/views/home/HomeView.vue')\n            },\n            // User\n            {\n                path: 'userList', name: 'UserList', component: () => import('@/views/user/UserList.vue')\n            },\n            {\n                path: 'addUser', name: 'AddUser', component: () => import('@/views/user/AddUser.vue')\n            },\n            {\n                path: 'editUser', name: 'EditUser', component: () => import('@/views/user/EditUser.vue')\n            },\n\n            // Admin\n            {\n                path: 'adminList', name: 'AdminList', component: () => import('@/views/admin/AdminList.vue')\n            },\n            {\n                path: 'addAdmin', name: 'AddAdmin', component: () => import('@/views/admin/AddAdmin.vue')\n            },\n            {\n                path: 'editAdmin', name: 'EditAdmin', component: () => import('@/views/admin/EditAdmin.vue')\n            },\n\n            // Category\n            {\n                path: 'categoryList', name: 'CategoryList', component: () => import('@/views/category/CategoryList.vue')\n            },\n            {\n                path: 'addCategory', name: 'AddCategory', component: () => import('@/views/category/AddCategory.vue')\n            },\n            {\n                path: 'editCategory', name: 'EditCategory', component: () => import('@/views/category/EditCategory.vue')\n            },\n\n            // Book\n            {\n                path: 'bookList', name: 'BookList', component: () => import('@/views/book/BookList.vue')\n            },\n            {\n                path: 'addBook', name: 'AddBook', component: () => import('@/views/book/AddBook.vue')\n            },\n            {\n                path: 'editBook', name: 'EditBook', component: () => import('@/views/book/EditBook.vue')\n            },\n\n            // Borrow\n            {\n                path: 'borrowList', name: 'BorrowList', component: () => import('@/views/borrow/BorrowList.vue')\n            },\n            {\n                path: 'addBorrow', name: 'AddBorrow', component: () => import('@/views/borrow/AddBorrow.vue')\n            },\n            {\n                path: 'editBorrow', name: 'EditBorrow', component: () => import('@/views/borrow/EditBorrow.vue')\n            }\n        ]\n    },\n    {\n        path: \"*\",\n        component: () => import('@/views/404.vue')\n    }\n]\n\n\nconst router = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes\n})\n\n// 守护路由\nrouter.beforeEach((to, from, next) => {\n    const savedRoute = localStorage.getItem('savedRoute');\n    // 如果访问路径是登录页面则直接放行\n    if (to.path === '/login') {\n        next()\n    }\n    // 如果不是就获取Cookie中的Admin-Token\n    const admin_token = Cookies.get('Admin-Token')\n    // 如果token不存在且访问的路径也不是登录页\n    if (!admin_token && to.path !== '/login') {\n        // 跳转到登录页\n        return next('/login')\n    }\n    if (savedRoute) {\n        next(savedRoute);\n    }\n\n    // token存在且访问路径不为登录页就直接放行\n    next()\n});\n\nrouter.afterEach((to) => {\n    localStorage.setItem('savedRoute', to.fullPath);\n});\n\nexport default router\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}