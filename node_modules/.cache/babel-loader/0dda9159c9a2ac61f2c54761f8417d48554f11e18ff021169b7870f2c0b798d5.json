{"ast":null,"code":"import Cookies from \"js-cookie\";\nimport { checkAdmin } from \"@/utils/check\";\nimport * as echarts from 'echarts';\nimport request from \"@/utils/request\";\nconst option = {\n  title: {\n    text: '图书借还统计'\n  },\n  tooltip: {\n    trigger: 'axis'\n  },\n  legend: {\n    data: ['借书数量', '还书数量']\n  },\n  grid: {\n    left: '3%',\n    right: '4%',\n    bottom: '3%',\n    containLabel: true\n  },\n  toolbox: {\n    feature: {\n      saveAsImage: {}\n    }\n  },\n  xAxis: {\n    type: 'category',\n    boundaryGap: false,\n    data: []\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [{\n    name: '借书数量',\n    type: 'line',\n    stack: 'Total',\n    smooth: true,\n    data: []\n  }, {\n    name: '还书数量',\n    type: 'line',\n    stack: 'Total',\n    smooth: true,\n    data: []\n  }]\n};\nexport default {\n  data() {\n    return {\n      admin: Cookies.get('admin') ? JSON.parse(Cookies.get('admin')) : {},\n      lineBox: null,\n      timeRange: 'week',\n      options: [{\n        label: '最近一周',\n        value: 'week'\n      }, {\n        label: '最近一个月',\n        value: 'month'\n      }, {\n        label: '最近两个月',\n        value: 'month2'\n      }, {\n        label: '最近三个月',\n        value: 'month3'\n      }]\n    };\n  },\n  mounted() {\n    this.load();\n  },\n  created() {\n    checkAdmin();\n  },\n  methods: {\n    load() {\n      if (!this.lineBox) {\n        this.lineBox = echarts.init(document.getElementById('line'));\n      }\n      request.get('/borrow/lineCharts/' + this.timeRange).then(res => {\n        console.log(res);\n        //设置x轴月份\n        option.xAxis.data = res.data.date;\n        //设置借书数量\n        option.series[0].data = res.data.borrowCount;\n        //设置还书数量\n        option.series[1].data = res.data.returnCount;\n        //重新设置容器的属性值，当数据发生变化的时候一定要重新setOption\n        this.lineBox.setOption(option);\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}