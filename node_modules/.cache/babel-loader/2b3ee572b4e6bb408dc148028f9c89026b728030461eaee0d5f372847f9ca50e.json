{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  name: 'AddBorrow',\n  data() {\n    return {\n      form: {},\n      books: [],\n      users: [],\n      rules: {\n        bookNumber: [{\n          required: true,\n          message: '请输入书籍标准码',\n          trigger: 'blur'\n        }],\n        userUsername: [{\n          required: true,\n          message: '请输入用户卡号',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    request.get('/book/list').then(res => {\n      console.log('/book/list: ', res);\n      this.books = res.data;\n    });\n    request.get('/user/list').then(res => {\n      console.log('/user/list: ', res);\n      this.users = res.data;\n    });\n  },\n  methods: {\n    save() {\n      this.$refs['ruleForm'].validate(valid => {\n        if (valid) {\n          console.log(this.form);\n          request.post('/borrow/save', this.form).then(res => {\n            if (res.code === 200) {\n              this.$notify.success('新增成功');\n              this.$refs['ruleForm'].resetFields();\n            } else {\n              this.$notify.error(res.msg);\n            }\n          });\n        }\n      });\n    },\n    selectBookNumber() {\n      const book = this.books.find(v => v.bookNumber === this.form.bookNumber);\n      request.get('/book/' + book.id).then(res => {\n        this.$set(this.form, 'bookName', res.data.bookName);\n        this.form.score = res.data.score;\n        this.form.nums = res.data.nums;\n      });\n    },\n    selectUserCard() {\n      const user = this.users.find(v => v.username === this.form.userUsername);\n      request.get('/user/' + user.id).then(res => {\n        this.$set(this.form, 'userName', res.data.name);\n        this.$set(this.form, 'userId', res.data.id);\n        this.form.userPhone = res.data.phone;\n        this.form.account = res.data.account;\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}